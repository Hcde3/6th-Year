<!Doctype html> 
<html lang="eng"> 
<head>
    <title>Exoploration</title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<body>
    <h1>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ </h1>
    <marquee loop="infinite" height="100px" direction="right">Exoploration-------Exoploration-------Exoploration-------Exoploration-------Exoploration-------Exoploration</marquee>
    <h1>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</h1>
    
    <img src="https://opengameart.org/sites/default/files/earthlike_planet_1-alpha.png" width="85" height="65">
    <img src="https://imgproxy.attic.sh/unsafe/rs:fit:768:768:1:1/t:1:FF00FF:false:false/pngo:false:true:256/aHR0cHM6Ly9hdHRp/Yy5zaC96MXYxaW55/ZjIybnR0eWpyNnpm/aWwwdmNhZ3Vh.png" width="70" height="70">
    <img src="https://www.usatoday.com/gcdn/presto/2018/11/14/USAT/ccf80e0d-c5ce-4b1c-8bf0-54e38a2b64c3-Image-One.png" width="100" height="100">
    <img src="https://static.wikia.nocookie.net/thesolarsystem6361/images/3/38/Neptune2023.png/revision/latest?cb=20230917021324" width="200" height="200">
    <img src="https://pngimg.com/d/jupiter_PNG5.png" width="300" height="300">
    <img src="https://cdn.pixabay.com/photo/2023/04/18/04/45/cosmos-7934144_640.png" width="275" height="275">
    <img src="https://static.wixstatic.com/media/76c963_90065f6bb0ac4a09ace1d8701db78e91~mv2.png/v1/fill/w_270,h_269,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/Star%20Brown%20Dwarf.png" width="400" height="400">
    
    <!--Display-->
    <H1>Exoplanets</H1>
    <h3>An exoplanet is a planet that resides outside the solar system. Exoplanets are extremely varied; some are 10x bigger than Jupiter, others are smaller than Mercury and some are surprisingly similar to Earth.</h3>
    <h3>This information system is an exploration of exoplanets, their properties and the various types of exoplanets found across the Milky Way.</h3>
    <h3>Most Exoplanets can be categorised into types based off their properties, for example mass. These types are: Earthlikes, Super Earths, Mega Earths, Neptunelikes, Jupiterlikes, Hot Jupiters and Brown Dwarves.</h3>
    <h3>My aim here is to gather data to analyse the trends and contrasts displayed by exoplanet types and to present this on the visualisations found below.</h3>
    <h1>Interactive Charts</h1>
    <h2>Choose 1 or more planet categories to chart.</h2>
    <form id="forms">
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Earthlike</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Super Earth</label>
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Mega Earth</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Neptunelike</label>
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Jupiterlike</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Hot Jupiter</label>
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Brown Dwarf</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Habitables</label>
        <input type ="submit"  value="Refresh"></input>
    </form>
    <canvas id="PlanetChart" style="width:100%;max-width:600px"></canvas>
    <form>
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Earthlike</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Super Earth</label>
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Mega Earth</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Neptunelike</label>
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Jupiterlike</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Hot Jupiter</label>
        <input type=checkbox id=vehicle1>
        <label for=vehicle1>Brown Dwarf</label>
        <input type=checkbox id=vehicle2>
        <label for=vehicle1>Habitables</label>
        <button type ="button" onclick="ChartRefresh()">Refresh</button>
    </form>
    <canvas id="RadiiChart" style="width:100%;max-width:600px;height: 600px"></canvas>
    <h1>Extra Charts</h1>
    <canvas id="TelescopeChart" style="width:100%;max-width:500px"></canvas><br>
    <h1>Applications and Final Notes</h1>
    <h3>The data presented in these visualisations can be analysed and applied to real life astronomy and planet science. When astronomers search the sky for more exoplanets of a certain type their distribution can be incredibly useful to know when choosing sample sizes. </h3>
    <h3>You could also use the average radius of the type of exoplanet being searched for to optimise the search. Using the transit method larger radii are more notable when crossing the average star, while smaller radii will be easier seen when passing smaller stars and harder when passing large stars.</h3>
    <h3>If you wanted to do your own research on exoplanets the 0.95m Kepler Telescope is definitely the best source of data as it provided around 75% of the exoplanetary data used in these visualisations.</h3>
    <script type="module">

    
    /////// Importing and Initialising Firebase ///////
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    const firebaseConfig = {
    apiKey: "AIzaSyAgpnolPXe-wPV0Bi4kr0ZXSwEjQE4rqE4",
    authDomain: "exoplanet-dataset.firebaseapp.com",
    databaseURL: "https://exoplanet-dataset-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "exoplanet-dataset",
    storageBucket: "exoplanet-dataset.firebasestorage.app",
    messagingSenderId: "1061417298619",
    appId: "1:1061417298619:web:9f73a30d16153b410b579e",
    measurementId: "G-TEVPDM6P9H"
    };
    const app = initializeApp(firebaseConfig);
    import { getDatabase, ref, set, get, update, child } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";
    const database = getDatabase(); //This creates a firebase instance
    const firebaseRef = ref(database,"/Analytics");
    
    /////// Creating Visualisations ///////
    var categories = ["Earthlikes","Super Earths","Mega Earths","Neptunelikes","Jupiterlikes","Hot Jupiters","Brown Dwarfs"];
    var catcolors = [ 'grey','green', 'yellow',"navy","orange","red","brown"]
    function processing(analytics) {
            let chartinfo = analytics.val()["Graph_Info"]
            var chart_radii = chartinfo["Radii"]
            var telescopes = chartinfo["Telescopes"]
            var planets = chartinfo["All Planets"]
            CHART_R(chart_radii)
            CHART_T(telescopes)
            CHART_P(planets)
        }

    function CHART_R(r) {
        var xValues = categories//.push("Earth for Comparison");
        var yValues = r//.push(1);
        var barColors = catcolors;

        new Chart("RadiiChart", {
        type: "bar",
        data: {
            labels: xValues,
            datasets: [{
            backgroundColor: barColors,
            data: yValues
            }]
        },
        options: {
                legend: {
                labels: {
                    fontColor: 'white'
                    }
                },
                responsive: true,
                title: {
                display: true,
                text: "Average Radius per Planet Type [showing in earth radii]"
                }
            } 
    });
    }

    function CHART_T(data) {
        var xValues = data["Names"];
        var yValues = data["Counts"];
        var barColors = ['red',"orange", 'yellow', 'green',"blue","purple",'red',"orange", 'yellow', 'green',"blue","purple"];

        new Chart("TelescopeChart", {
            type: "doughnut",
            data: {
                labels: xValues,
                datasets: [{
                backgroundColor: barColors,
                data: yValues
                }]
            },
            options: {
                responsive: true,
                title: {
                display: true,
                text: "Most Common Telescope Used in Dataset"
                }
            }
        });
    }

    function CHART_P(data) {
        var xValues = categories;
        var yValues = data["Counts"]    ;
        var barColors = catcolors;

        new Chart("PlanetChart", {
            type: "pie",
            data: {
                labels: xValues,
                datasets: [{
                backgroundColor: barColors,
                data: yValues
                }]
            },
            options: {
                responsive: true,
                title: {
                display: true,
                text: "Distribution of Planet Types in Dataset"
                }
            }
        });
    }


    function ChartRefresh(event) {
        event.preventDefault()
        console.log("here")
        get(firebaseRef).then(processing);
       }            
    let submission = document.getElementById("forms")
    submission.addEventListener("submit",ChartRefresh)

    get(firebaseRef).then(processing);
    </script>
</body>
<!--Design and Presentation-->>
<style>
    body {
      background-image: url("https://cdn.hswstatic.com/gif/exoplanets-1.jpg");
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-size: cover;
      color: white;
    }
    canvas#PlanetChart {
    background-color: rgb(255, 255, 255);
    }
    canvas#RadiiChart {
    background-color: rgb(255, 255, 255);
    }
    canvas#TelescopeChart {
    background-color: rgb(255, 255, 255);
    }
    marquee {
    font-size: 100px;
    }
</style>
</html>
